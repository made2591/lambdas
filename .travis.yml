language: python

python:
  - '3.7'

branches:
  only: master

env:
  - secure: tRZ+X3CJVcXYzIaMi/1roZjQvRX/H7G6wj+X/2SyNuB1ves6oZYCMVcvmkmC0p4YjN7rb8mQEW6evRyT/nz028GFDaN9E0zjQqEVvwpc8zo6pnx2BWIwATAIyeIMUtTeByTliNpF4MYsR08upMYZ+bz1k3C5ruMcESqDFqEke4SCbVQ0U/Cfqd/+P+Qu5Uj64OwVK+x0CVMeyDIqN9KO/bUkTU3m2+5xPr3cz+9KV8xxnbygzQyFN+Jo8nBJSLG49jR927NVuRhbh2aIRMJlUXIMCBhKE/Ii7DnDXf8fMUsyB+A1NazzEwuQOCUTMS372MtNS91I/UWW0YM2vBa/AYY+DVOQNdHDh2DaaT+YQkGgEpmZ+oPD8RtQMW3yA+LpU7TS+KWGuOJqrWozIxkFHuZQj95kchHu4VEDeqp3RJKVuPhq0PJADdxrFxPVBO9CwUtqLnjtdhVidqBJr4sO/tlktnGjhEWXCqDsenKbX5cflfEB0GeK80nBSWsXf00Gh8gKZkE6hrhueXpqzRN5sT66Cp9Ibsr9X5cc1pLDzzDcedmPqIRcU+5kuTDm6nsHe95UHL+yvF9mOtpn2VWrTQmjE87Ja46TQwzqyHQQ2Stdab0FvH1HERye5QOAw1+of9Etu67Sd908Qs/n8YKkziCqvDOSlJkbQULgjHfoGAk=
  - secure: wXaGiDbsaIq9LRakzVviG8xjPYZ3871GCptT41RRZ5i+KVA2jvXJk63/tDjzNGlmjjj1PXKw2yiJxSgo8Cz7xHlRjAf150f66PFXCrTZXa763XFmkAw+gCvOy/t9djLW2g7Tj3djJkp313yucva26ouTMTgq02v1K8uj1yqLB1o9x0l8OcOnO4rXfoFCTnkNvuO2NjYIxx7UBGMANynFQoB5Z/Wa1xfUyZWhRHOTamsKDtseGfhwej84trxKfatqakeQC3DoQ0Ip4n0R7LXqyZJHMKJ7taQ2YXNYShK0hXd1M+FTIWywMDy9hvDXE6gxSo+dRLCeTy2UA7/jMaG2wSi0tNUsXADgOuUIFkUjiFQVnwGbWU0C8zmZif6fsfkoR2AVUpuQBXOyjIkDM/SGNrctJ678ycMBclgfgo7HpH9ETOv1yOFqCoq4ezYgNpN3pDTDw+gItDOa4OijaSpiA2lWEMMO9K1LJ27hRizG20L7V0FScTZ1+foplkJQXZwEczvMN0GcV+7T89LFhlRvXQ6VCRonCcqLO4N2o69DsBBP0iMmhJ2X2nXHx+4W6u6812Ses4OTPmC23RoqdNShsM/K/PCmH8Qwnu+v0Fq1Zwxvr6FRTzXQ3Am1gNVfEUJ/tDHY+aLdCtiOx5TJRoY+ZXsjEOJFaWk/OONUDRGbxI4=
  - secure: UvF+G2LoouKYSdETEDsOzoYNuZbosWGuB5pFqydMyAwbc1Cn6QgXePmswISNCkVzDnNtjp+oQUKz5+7B6hgDOXxyiFPlkq8L4Pc6cL0UaAhGLzUV+JxhT8Lj1phRGcQiFFFT01VRM0YcDxt9QmKbWv784lIWsmVoWfXzxX8OTFp5i/k7oBFHfyida47GCIQu3z06MevwcN0GyhCBWu9lYxEW/dzsRAn4vusAG7Uya7WoqHN0vVKxGu90opY7R3lbVoqkiwx/B+LOSnpis7nVCaLLJ5RmGa5vJ8MyYXtRjfddR5Rg5wASngBDH25mYUKhNRt3jSJaabiPhgAO/Rw7GG4Ig7RXvjew+4PRBT6tcDcMb8ABA3b3QiCLLZwjPNOs1Kl4X0D/mROle2XPscpcSabufq7/wRM371u5ApgWgNT58o7PyXLqfz+9i5QuxZlY81lcS6ayBmumLPHRL7DtcausjXkYfKEMobZTdzy1Rh+dYSzkQl11mfL+NyvCHEY8MIj/tLDUDM39m8i6JxaBowA38NFR6sTbBAihi/DUvZA8hf1tJQ/1GH5y/1BQkU+9FMoYak6yf9YPeOBnG2gnccK8dhXsL1kNYVCR4dHBAivJ8Ny/GtcwvNhTZTVLaR5qcH6HT6DBmjTZLfX+bkQwZzzf5VPcocKZii5QliDVuto=
  - secure: 7k4HZ18fOxGOiL+/gYttt7u/DQEpR9OsOwvTpYnQgXrOYM1zJQnGXr0wMiSD1IYE2E5MpJ/dQ2JChvShlw5f9eLnfikxKuLjq5XNExfyZpeOPfPlCuOBfTnwcTRu0kotkTXTnlewCqGRlJgbj/YUY5xOseN9mmoKdGxp8c6LFtj/QzEh/3in16FYtILr+DF3HVmPn40uANGhuvzlXVVjwMyiyz13gE6qpX+C3C6Yzx3Hoi9nC6ZzJXOmF9CFL7h5a7S3yxxAYNd11W5UofxVf8j/EhvKp91UiMx9KGS+Ph7ZVTw5tlo+J5Nkcmayegwe7tZ1NrQqC7GHCqtDkdiRCh8O3emSJ3mFbhzO0rAjWnfsgZuZVe9+hOaF2NBVm4rGHMjdfdn9EZtFNV7g+IpluBAWUT5DwWDPNkQIrGZCqYnBmSSVwbSzhFj6Ke4EhXHjnFF6GShXKraYszmXYExcRtphlT590a+eB0WMbOCwP0RdGeBVa+U+Wtsro7lg/QZzHPKC+0fy/F7Ppr1GTCCGfDBiPghA8QlxDu+8uj25ouLFBiO8kQSw2JAHxkiwuMtmVN0qBCEHJx7bqqP6butHHakCrDGk395BnWLm2EnoMEnRFIcksM+cxYOmJBBaslxhQV+/DKIJs3EvCEUzQ7Q7iWtukvpq1fp7/obRhQcWghU=
  - secure: rcXLuYb/m25jASnquKWg1WNT/+4FGJvPipYIryzGgzn8QLruFb9Q0HQoAFDRewDYMek4uPQlIHy+ij57D5b4h4001qD6Kdkq2qUg0bz/8DMCmpbn1PCS2n1w3qv1DaHoAbVSa7YKPNWjSRmlUXcDWgwyyRyWnDdEpvFfjwH78+OwDKKwORQrCUpqIWmmB+INp2KmEODpmQFjP5dh8aAciK8hOtgAqcoATjoVrrPEdCHPv0MfxU1RvyzRId8/QXAyQT4Tltt6aBlEkswYr3wPG+PyCkVEK0pqnBlLxuIskD/gvtejYYXuCW0qmCRmYRJYuSnUqN9GCqUiqt9a4jVaD3aTy9dthxuEjWHXRGk2nFjHE1iMKUceNHIwa9AumrrBz9UJXpcDxed/j71gCA/xONsij/hqnQCQiGICfnSsyrNWOGzi6IFkLATbZuFpRuYrQj7Lki3WMAX+SawPbf+SZ5VStz27tP13tOPcK36rXiYtoo0IJafixLM62sX93ki1eD4z2tT8arqvDosSL+LlnuaD+LSY/3GcKtMfhpJ6NiYrA/qo5ar5+cZmapPGua4dpmIVBpBRO9DyDorEXCbC37Op4y7ViUgkXGQw1iyMrcrT3CghmxXjzhUJxw1L3QDqg2FYLyAxQ0SsM3YzpZXGxA6/eQxyjO7NtT41stlOemM=
  - secure: X11j5cGrSejQ0pvU/c7FvIuI76sUUH1StafDQB6IF73B0oAil7VFGYUUzfS05PyHDIDQ148yMKu3PstREy+jBqDt2zumdHAAb36gztnkFE27tFXUl1xa7m7Rs8wD1Zu1QY7OcS5U62xB0nLDJYxugodn3xAHepeG3/CAqzSznPoc+96os5f0pTlMjcW0CKEvwtQBzmXDuQZn4Q7O7JLjRcmkpGmqZe+QPp9Hao6qnlBSsMELtEL9C99Keud0rMHIPftqXzXI4hUzg2F6Vsq3N/QAXihDKNUAVGnF7FZR9ss/N916oQxaHPtQgygRuv3nKn1GcOiyEf1NlJ1c3GdBluv7K+T1E0S+dMS9Ypp+7MWxRwd5Sd/uUQmkZqzmIPgpPw0Ne3olLgJ2nRNL21Xi+Ql0B4PMuThfIumQ/rCK+qQHeGIFd5DHhBBWp1JBuhqUvSSt7tAvdPlzmx7NGQZ1P7xJMHhwU8ZeZRoQG/jlgZoRPppy5yQZ+iNonrNRAvFLj5mn+Yyr+159u5lx10+NgQpxm+HcR/BAqMHU5ZSQDETMsEdPkaO04RSvh/9Guw7ms/NZ/y0LyB/ZNbgK2lcDMiqteUSjLuUiGjNYF7gj3OGxT/Ek9TzgAZ7WXvIoP/mjqE8cVc6fT+c2HqPZPOIQ3LgIutgNA4QuY4nc8MPDhe4=
  - secure: Nvxy/ZjsJcdhA9HG9bccP8ZHNmJiMfLLJexs1g3qnHo67kofkmPeiLWQw1dOErDL7s+kM8IYG0nNMjV3OPwdVcVNV96/Veo90nTNduelQKnJZm9Tf02hNXKd4MG7IK8Pzey2eICcCfEI/H2iMgQE7Aq/jJAEHQWr99iM11JF9b9WmQQkoKLqRealtf8k7Q/u7zsoT5fd9McMYz+92/70msJuqHvGHLsryaYXnrVxVi+PEXLg6MV+M85Fi1ZCqF8sFS9zoQoJMWNOUrIPOne1chUdn7LgPodrlWlxoXhDXUeBEn06XD/mHHD6/mMRnQuy3he1DuRpY/3Dt9FUjtlN/cGoqxfBXMoImJRrlHbXuqQeW2nDGY1P2zrcJaIMUyRJ3EVKC/hcK3WmQLPOhFiW5kufb9zaLbz4sN5hCZ2nczzrRYoYgUszfjUg2sBqRDaHSnQ1OJu5GiGWz7jaUa+E4WYIOC059lAM4fWc+pzqZlySeEASKj3LuO6oUBGSUJWw35ONtrEAwVoVlQxhZyBp2zJd5c2Wx96XaM0tJpgIl/yO+t3bNMyqcxsGQBsnEsckTH0KbAQgv2wMnM64guBcwHcoQS8uXtygFbOv+IJV66dz0HE5yyq0Sn13qw5A30x+pJcTZWKwerG5Uco8XciKsmnyxo+VrKbrBz+NhhMSRxk=

install:
  - pip install awscli

script:
  - aws cloudformation package --template-file template.yaml --output-template-file packaged.yaml --s3-bucket $LAMBDAS_BUCKET

deploy:
  provider: script
  script: aws cloudformation deploy --template-file packaged.yaml --stack-name lambdas --capabilities CAPABILITY_IAM
  on:
    branch: master

notifications:
  email:
    on_success: never
    on_failure: always